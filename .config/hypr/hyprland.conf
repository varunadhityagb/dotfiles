$terminal = kitty
$fileManager = thunar
$menu =  rofi -kb-element-prev "Ctrl+[45]" -kb-element-next "Ctrl+[44]" -kb-mode-previous "Ctrl+[43]" -kb-mode-next "Ctrl+[46]"
$browser = brave --enable-features=UseOzonePlatform,TouchpadOverscrollHistoryNavigation --ozone-platform=wayland --disable-features=WaylandWpColorManagerV1

source = ./colors.conf
source = ./shader.conf
source = ./monitors.conf

exec-once = [workspace 1 silent] $terminal
exec-once = [workspace 4 silent] /home/varunadhityagb/.config/hypr/scripts/open_whatsapp
exec-once = bash -c '/usr/bin/screen_timer start'
exec-once = bash -c '/home/varunadhityagb/.local/bin/wellbeing on'
exec-once = sleep 1; waybar
exec-once = emacs --daemon
exec-once = cliphist wipe
exec-once = swww-daemon
exec-once = hypridle
exec-once = avizo-service
exec-once = /usr/bin/clipse -clear
exec-once = /usr/bin/clipse -listen
exec-once = syncthing --gui-address=0.0.0.0:8384 --no-browser
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = swaync
exec-once = kdeconnect-indicator
exec-once = kdeconnectd
exec-once = wayscriber --no-tray -d
exec-once = qs -c overview

env = XCURSOR_SIZE,24
env = XCURSOR_THEME,Bibata-Modern-Ice
env = HYPRCURSOR_SIZE,24
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_PLUGIN_PATH,/usr/lib/qt6/plugins
env = SDL_VIDEODRIVER,wayland
env = MOZ_ENABLE_WAYLAND,1
env = ELECTRON_OZONE_PLATFORM_HINT,wayland
env = OZONE_PLATFORM,wayland
env = LD_LIBRARY_PATH,/usr/lib:/usr/lib64:/usr/local/lib:/usr/local/lib64
env = GTK_IM_MODULE,fcitx
env = QT_IM_MODULE,fcitx
env = XMODIFIERS,@im=fcitx
env = MESA_LOADER_DRIVER_OVERRIDE,iris
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_QPA_PLATFORMTHEME_QT5,qt5ct
env = QML2_IMPORT_PATH, /usr/lib/qt6/qml

general {
    gaps_in = 5
    gaps_out = 8
    border_size = 3
    resize_on_border = true
    allow_tearing = false
    col.active_border = $primary
    layout = dwindle
}

source = ./shader.conf

decoration {
    rounding = 10
    rounding_power = 4
    blur {
        enabled = true
        size = 1
        passes = 4
        ignore_opacity = true
        new_optimizations = true
        popups = true
        popups_ignorealpha = 0.1
    }
}


animations {
    enabled = true
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    bezier = circBezier, 0.445, 0.05, 0.55, 0.95
    bezier = overshoot, 0.05, 0.9, 0.1, 1.1
    animation = windows, 1, 5, overshoot, gnomed
    animation = windowsMove, 1, 2, overshoot
    animation = fade, 1, 7, circBezier
    animation = workspaces, 1, 2, overshoot, slidefade 75%
    animation = layers, 1, 3, circBezier, slide
}

dwindle {
    pseudotile = true
    force_split = 2
    preserve_split = true
}

master {
    new_status = master
    new_on_top = true
}

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo = true
    on_focus_under_fullscreen = 2
    vrr = 2
    animate_manual_resizes = true
}

binds {
    workspace_back_and_forth = true
    hide_special_on_workspace_change = true
}

cursor {
    hide_on_key_press = true
}

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options = caps:escape_shifted_capslock
    kb_rules =
    follow_mouse = 1
    sensitivity = 0
    scroll_button = 108

    touchpad {
        natural_scroll = true
        clickfinger_behavior = true
        disable_while_typing = true
    }
}



windowrule {
  name = windowrule-1
  float = on
  stay_focused = on
  size = 802 537
  match:class = ^(qalculate-gtk)$
}


windowrule {
  name = windowrule-2
  float = on
  stay_focused = on
  match:title = (Peek preview)
}

windowrule {
  name = windowrule-3
  float = on
  stay_focused = on
  pin = on
  move = (10) (60)
  size = (monitor_w*0.3) (monitor_h*0.3)
  match:title = (Picture-in-Picture)
}


windowrule {
  name = windowrule-4
  idle_inhibit = fullscreen
  suppress_event = maximize
  match:class = .*
}


windowrule {
  name = windowrule-5
  float = on
  stay_focused = on
  match:class = (brave-nngceckbapebfimnlniiiahkandclblb-Default)
}

windowrule {
  name = windowrule-6
  workspace = 1
  match:class = (emacs)
}

windowrule {
  name = windowrule-7
  workspace = 1
  match:class = (code)
}

windowrule {
  name = windowrule-8
  workspace = 1
  match:class = (DBeaver)
}

windowrule {
  name = windowrule-9
  workspace = 2
  match:class = (ONLYOFFICE)
}

windowrule {
  name = windowrule-10
  workspace = 2
  match:class = (org.pwmt.zathura)
}

windowrule {
  name = windowrule-11
  workspace = 3
  match:class = ^(?i)brave-.*
}

windowrule {
  name = windowrule-12
  workspace = 4
  border_color = rgb(144D37)
  match:initial_title = (web.whatsapp.com_/)
}

windowrule {
  name = windowrule-13
  workspace = 4
  match:initial_title = (teams.microsoft.com_/)
}

windowrule {
  name = windowrule-14
  workspace = 4
  match:initial_title = (outlook.office.com_/)
}

windowrule {
  name = windowrule-15
  workspace = 5
  match:initial_title = (youtube.com_/)
}

windowrule {
  name = windowrule-16
  workspace = 5
  match:class = (spotify)
}


windowrule {
  name = windowrule-17
  float = on
  center = on
  stay_focused = on
  size = 800 600
  match:class = ^(blueberry.py|pavucontrol|Wiremix|clipse)$
}

windowrule {
  name = windowrule-18
  float = on
  center = on
  stay_focused = on
  match:class = xdg-desktop-portal-gtk
  match:title = ^(Open.*Files?|Save.*Files?|All Files|Save)
}

windowrule {
  name = windowrule-19
  float = on
  center = on
  stay_focused = on
  match:title = (.*wants to save)$
}

windowrule {
  name = windowrule-20
  float = on
  center = on
  stay_focused = on
  match:title = (.*wants to open)$
}

windowrule {
  name = windowrule-21
  float = on
  stay_focused = on
  match:title = ^(Rename.*)
}

windowrule {
  name = windowrule-22
  float = on
  stay_focused = on
  match:class = (java)
  match:title = (Dbeaver)
}

windowrule {
  name = windowrule-23
  float = on
  center = on
  match:title = (File Operation Progress)
}

windowrule {
  name = windowrule-24
  float = on
  size = 393 871
  move = (460) (75)
  match:title = (I2223)
}

#tyuiox

layerrule {
  name = layerrule-1
  animation = popin
  blur = on
  match:namespace = rofi
}

layerrule {
  name = layerrule-2
  animation = popin
  blur = on
  match:namespace = avizo
}

layerrule {
  name = layerrule-3
  animation = slide top
  blur = on
  match:namespace = waybar
}

layerrule {
  name = layerrule-4
  animation = popin
  blur = on
  match:namespace = fabric
}

layerrule {
  name = layerrule-5
  animation = slide right
  blur = on
  match:namespace = swaync-control-center
}

layerrule {
  name = layerrule-6
  blur = on
  ignore_alpha = 0
  match:namespace = swaync-notification-window
}

layerrule {
  name = layerrule-7
  blur = on
  match:namespace = kitty
}


layerrule {
  name = layerrule-8
  blur = on
  ignore_alpha = 0
  xray = 0
  match:namespace = wofi
}

layerrule {
  name = layerrule-9
  ignore_alpha = 0.2
  match:namespace = waybar
}

layerrule {
  name = layerrule-10
  blur_popups = on
  match:namespace = waybar
}

bind = SUPER, R, submap, apps
submap = apps, reset

# ---
bind = , W, exec, /home/varunadhityagb/dotfiles/.config/hypr/scripts/open_whatsapp
bind = , T, exec, $browser --app=https://teams.microsoft.com/
bind = , I, exec, $browser --app=https://instagram.com
bind = , D, exec, discord
bind = , M, exec, $browser --app=https://outlook.office.com/
bind = , E, submap, files
bind = , S, submap, screen
bind = , F, exec, ~/dotfiles/.config/hypr/scripts/quickFiles
bind = , 2, exec, bash -c "2fa | rofi -kb-element-prev 'Ctrl+[45]' -kb-element-next 'Ctrl+[44]' -kb-mode-previous 'Ctrl+[43]' -kb-mode-next 'Ctrl+[46]' -dmenu | awk '{print \$1}' | xargs wl-copy"
# ---

bind = , code:66, submap, reset
submap = reset

submap = files, reset

bind = , E, exec, emacsclient -c -F "((title . \"emacs-dired\"))" -e "(dired \"~\")"
bind = , D, exec, emacsclient -c -F "((title . \"emacs-dired\"))" -e "(dired \"~/Downloads\")"
bind = , S, exec, emacsclient -c -F "((title . \"emacs-dired\"))" -e "(dired \"~/Syncthing/College/Sem5\")"

bind = , code:66, submap, reset
submap = reset

bind = SUPER, B, exec, $browser
bind = SUPER SHIFT, B, exec, $browser --incognito
bind = SUPER, Q, exec, emacsclient -c -a ""
bind = SUPER, D, exec, pkill -SIGUSR1 wayscriber
bind = SUPERSHIFT, D, exec, ~/dotfiles/.config/hypr/scripts/define

bind = SUPER, M, submap, media
submap = media

bindel = , K, exec, wpctl set-volume -l 2 @DEFAULT_AUDIO_SINK@ 5%+ && ~/dotfiles/.config/hypr/scripts/volume_notify
bindel = , J, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- && ~/dotfiles/.config/hypr/scripts/volume_notify
bindel = , L, exec, playerctl next
bindel = , H, exec, playerctl previous
bindel = , space, exec, playerctl play-pause
bind = , A, submap, media_apps
bind = , code:66, submap, reset
bind = , code:9, submap, reset
submap = reset


submap = media_apps, reset
bind = , S, exec, flatpak run com.spotify.Client
bind = , Y, exec, brave --app=https://youtube.com/
bind = , H, exec, brave --app=https://hotstar.com/
bind = , P, exec, brave --app=https://primevideo.com/
bind = , N, exec, brave --app=https://netflix.com/
bind = , code:66, submap, reset
submap = reset

bind = SUPER alt, N, submap, nobinds
submap = nobinds
bind = SUPER alt, code:66, submap, reset
submap = reset

submap = screen

bind = SHIFT ,R, exec, ~/dotfiles/.config/hypr/scripts/screenRotate 0
bind = , R, exec, ~/dotfiles/.config/hypr/scripts/screenRotate 1
bind = , S, exec, ~/dotfiles/.config/hypr/scripts/shaders-rofi

binde = , l, resizeactive, 10 0
binde = , h, resizeactive, -10 0
binde = , k, resizeactive, 0 -10
binde = , j, resizeactive, 0 10

bind = shift, h, movewindow, l
bind = shift, l, movewindow, r
bind = shift, k, movewindow, u
bind = shift, j, movewindow, d

bind = , code:66, submap, reset
submap = reset

bind = SUPER, S, submap, homeserver
submap = homeserver, reset

bind = , return, exec, $terminal -e kitten ssh varunadhityagb@100.70.52.122
bind = , E, exec, emacsclient -c -F "((title . \"emacs-dired\"))" -e "(dired \"/sftp:100.70.52.122:/home/varunadhityagb/\")"
bind = , D, exec, emacsclient -c -F "((title . \"emacs-dired\"))" -e "(dired \"/sftp:100.70.52.122:/home/varunadhityagb/Downloads\")"
bind = , S, exec, emacsclient -c -F "((title . \"emacs-dired\"))" -e "(dired \"/sudo:root@100.70.52.122:/home/varunadhityagb/\")"
bind = , code:9, exec, $terminal -e kitten ssh -t varunadhityagb@100.70.52.122 btop

bind = , code:66, submap, reset
submap = reset

bind = SUPER, return, exec, $terminal

# guestures
gesture = 3, horizontal, workspace
gesture = 3, vertical, scale:1.5, fullscreen, maximize
gesture = 3, vertical, mod: ALT, scale:1.5, fullscreen
gesture = 3, vertical, mod: SUPER, float

#window management
bind = SUPER, W, killactive,
bind = SUPER, F, exec, hyprctl dispatch fullscreen 0
bind = ALT, Tab, cyclenext
bind = ALT, Tab, bringactivetotop
bind = SUPER, TAB, exec, qs ipc -c overview call overview toggle

#applications
bind = alt, space, exec, $menu -show drun -sort false

#misc
bind = ALT, F9, exec, ~/dotfiles/.config/hypr/scripts/vigil
bind = SHIFT, F9, exec, ~/dotfiles/.config/hypr/scripts/hyprsunset
bind=  SUPER, P, exec, ~/dotfiles/.config/hypr/scripts/project
bind = SUPER, code:9, exec, $terminal -e btop
bind = SUPER, N, exec, swaync-client -t
bind = alt, N, exec, bash /home/varunadhityagb/dotfiles/.config/hypr/scripts/dnd-toggle.sh

bind = SUPER, Z, exec , ~/dotfiles/.config/hypr/scripts/zen
bind = SUPER shift, C, exec, bash -c "hyprpicker | tr -d '\n' | wl-copy"

bind = SUPER, V, exec, kitty --class clipse -e 'clipse'

# Screenshot & Screen Record
bind = SUPER, PRINT, exec, ~/dotfiles/.config/hypr/scripts/screenshot window copy
bind = SUPER SHIFT, PRINT, exec, ~/dotfiles/.config/hypr/scripts/screenshot region save
bind = SUPER SHIFT, S, exec, ~/dotfiles/.config/hypr/scripts/screenshot region copy
bind = SUPER SHIFT, R, exec, ~/dotfiles/.config/hypr/scripts/screenrecord
bind = SUPER SHIFT, O, exec, grim -g "$(slurp)" - | tesseract stdin stdout -l eng+osd --psm 6 | wl-copy


# Move focus with mainMod + arrow keys
bind = SUPER, h, movefocus, l
bind = SUPER, l, movefocus, r
bind = SUPER, k, movefocus, u
bind = SUPER, j, movefocus, d
# bind = SUPER, tab, hyprexpo:expo, toggle

bind = SUPER shift, h, movewindow, l
bind = SUPER shift, l, movewindow, r
bind = SUPER shift, k, movewindow, u
bind = SUPER shift, j, movewindow, d


# Switch workspaces with mainMod + [0-9]
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6
bind = SUPER SHIFT, 7, movetoworkspace, 7
bind = SUPER SHIFT, 8, movetoworkspace, 8
bind = SUPER SHIFT, 9, movetoworkspace, 9
bind = SUPER SHIFT, 0, movetoworkspace, 10

# Example special workspace (scratchpad)
bind = SUPER, A, togglespecialworkspace, m1
bind = SUPER shift, A, movetoworkspace, special:m1


# Laptop multimedia keys for volume and LCD brightness
bindel=, XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+ && ~/dotfiles/.config/hypr/scripts/volume_notify
bindel=, XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- && ~/dotfiles/.config/hypr/scripts/volume_notify
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle && ~/dotfiles/.config/hypr/scripts/volume_notify
bindl = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_SOURCE@ toggle && ~/dotfiles/.config/hypr/scripts/mic_notify
bindel=, XF86MonBrightnessDown, exec, brightnessctl s 2%- && ~/dotfiles/.config/hypr/scripts/brightness_notify 0
bindel=, XF86MonBrightnessUp, exec, brightnessctl s 2%+  && ~/dotfiles/.config/hypr/scripts/brightness_notify 0
bind = , XF86AudioPrev, exec, swayosd-client --playerctl prev
bind = , XF86AudioNext, exec, swayosd-client --playerctl next
bindl = ,XF86AudioPlay, exec, playerctl play
bindl = ,XF86AudioPause, exec, playerctl pause

bindel= SHIFT, XF86MonBrightnessDown, exec, ddcutil setvcp 10 - 5 --bus 3 && ~/dotfiles/.config/hypr/scripts/brightness_notify 1
bindel= SHIFT, XF86MonBrightnessUp, exec, ddcutil setvcp 10 + 5 --bus 3 && ~/dotfiles/.config/hypr/scripts/brightness_notify 1

bind = , XF86PowerOff, exec, ~/dotfiles/.config/rofi/powermenu.sh
bind = ALT, XF86PowerOff, exec, brightnessctl set 1% && ~/dotfiles/.config/hypr/scripts/brightness_notify 0
bind = ALT SHIFT, XF86PowerOff, exec, ddcutil setvcp 10 0 --bus 3 && ~/dotfiles/.config/hypr/scripts/brightness_notify 1
bind = SHIFT, XF86PowerOff, exec, qalculate-gtk

bindel = ctrl alt, up, exec, wpctl set-volume -l 2 @DEFAULT_AUDIO_SINK@ 5%+ && ~/dotfiles/.config/hypr/scripts/volume_notify
bindel = ctrl alt, down, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- && ~/dotfiles/.config/hypr/scripts/volume_notify
bindl= ctrl alt, right, exec, playerctl next
bindl= ctrl alt, left, exec, playerctl previous
bindl = ctrl alt, space, exec, playerctl play-pause
bind = ctrl alt, L, exec, hyprlock

# Scroll through existing workspaces with mainMod + scroll
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

#zoom
bind = SUPER ctrl, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
bind = SUPER ctrl, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')

#browser navigation
bind = ALT, mouse:272, exec, wtype -M alt -k left
bind = ALT, mouse:273, exec, wtype -M alt -k right
